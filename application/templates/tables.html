{% macro coffeetable(coffeeset, viewperson=True) -%}
<table class="table">
    <thead>
        <tr>
            <th>ID</th>
            {% if viewperson %}<th>Addict</th>{% endif %}
            <th>Type</th>
            <th>Size</th>
            <th>Sugar</th>
            <th>Run</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        {% for coffee in coffeeset %}
        <tr>
            <td><a href="/coffee/{{ coffee.id }}/">{{ coffee.id }}</a></td>
            {% if viewperson %}<td><a href="/user/{{ coffee.addict.id }}">{{ coffee.addict.name }}</a></td>{% endif %}
            <td>{{ coffee.coffeetype }}</td>
            <td>{{ coffee.size }}</td>
            <td>{{ coffee.sugar }}</td>
            <td><a href="/run/{{ coffee.runobj.id }}/">{{ coffee.runobj.readtime() }}</a></td>
            <td>{{ coffee.runobj.statusobj.description }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{%- endmacro %}

{% macro runtable(runset, viewperson=true) -%}
<table class="table">
    <thead>
        <tr>
            <th>ID</th>
            {% if viewperson %}<th>Fetcher</th>{% endif %}
            <th>Time</th>
            <th>Deadline</th>
            <th>Cafe</th>
            <th>Pickup</th>
            <th>Status</th>
            <th>Coffees</th>
        </tr>
    </thead>
    <tbody>
        {% for run in runset %}
        <tr>
            <td><a href="/run/{{ run.id }}/">{{ run.id }}</a></td>
            {% if viewperson %}<td><a href="/user/{{ run.fetcher.id }}">{{ run.fetcher.name }}</a></td>{% endif %}
            <td>{{ run.readtime() }}</td>
            <td>{{ run.readdeadline() }}</td>
            <td>{{ run.cafe }}</td>
            <td>{{ run.pickup }}</td>
            <td>{{ run.statusobj.description }}</td>
            <td>{{ run.coffees|length }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{%- endmacro %}
